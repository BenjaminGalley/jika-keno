<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fast Keno | Simba Bet</title>
    <style>
        :root {
            --gold: #FFD700;
            --cyan: #00f2ff;
            --panel: #0a0e17;
        }

        body { 
            background: #000; color: white; font-family: sans-serif; 
            margin: 0; padding: 0; overflow: hidden; 
            height: 100vh; display: flex; flex-direction: column;
        }

        /* Top Header */
        .header { 
            background: var(--panel); height: 50px; display: flex; 
            justify-content: space-between; align-items: center; padding: 0 15px;
            border-bottom: 2px solid var(--gold); flex-shrink: 0;
        }
        .lobby-btn { background: #333; color: white; border: none; padding: 5px 10px; border-radius: 4px; font-size: 12px; }
        .game-title { color: var(--cyan); font-weight: 900; font-size: 18px; text-transform: uppercase; }

        /* Timer Bar */
        .timer-bar {
            background: #000; color: var(--cyan); text-align: center;
            font-size: 24px; font-weight: bold; padding: 5px 0;
            border-bottom: 2px solid var(--cyan); flex-shrink: 0;
        }

        /* Keno Grid - Scaled to fit screen */
        .grid-container {
            flex: 1; display: flex; align-items: center; justify-content: center;
            padding: 5px; min-height: 0;
        }

        .keno-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 2px;
            width: 100%;
            max-width: 360px;
            background: #222;
            padding: 2px;
            border: 1px solid #444;
        }

        .num-cell {
            aspect-ratio: 1;
            background: #1a1a1a;
            border: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }

        .num-cell.selected { background: var(--cyan); color: black; border-color: white; }
        .num-cell.hit { background: var(--gold); color: black; }

        /* Bottom UI - Fixed and Visible */
        .bottom-ui {
            background: var(--panel); border-top: 2px solid #333;
            padding: 10px; flex-shrink: 0;
            display: flex; flex-direction: column; gap: 10px;
        }

        .stats-row {
            display: flex; justify-content: space-between; font-size: 13px; color: #aaa;
        }

        .controls-row {
            display: flex; justify-content: space-between; align-items: center;
        }

        .balance-box { color: var(--gold); font-weight: bold; font-size: 16px; }

        .bet-selector {
            display: flex; align-items: center; gap: 8px; background: #1a1a1a; 
            padding: 4px 12px; border-radius: 20px; border: 1px solid var(--gold);
        }

        .step-btn { 
            background: var(--gold); border: none; width: 28px; height: 28px; 
            border-radius: 50%; font-weight: bold; font-size: 18px;
        }

        .play-btn {
            background: linear-gradient(180deg, var(--gold), #b8860b);
            border: none; width: 100%; height: 45px; font-weight: 900; border-radius: 22px;
            font-size: 18px; color: black; text-transform: uppercase;
            box-shadow: 0 4px 0 #8b6b00;
        }

        .play-btn:active { transform: translateY(2px); box-shadow: 0 2px 0 #8b6b00; }
    </style>
</head>
<body>

    <div class="header">
        <button class="lobby-btn" onclick="location.href='index.html'">LOBBY</button>
        <div class="game-title">FAST KENO</div>
        <div id="speaker" onclick="toggleMute()" style="cursor:pointer">ðŸ”Š</div>
    </div>

    <div class="timer-bar" id="timer">00:47</div>

    <div class="grid-container">
        <div class="keno-grid" id="grid">
            </div>
    </div>

    <div class="bottom-ui">
        <div class="stats-row">
            <span>PICKED: <span id="pickCount" style="color:var(--cyan)">0</span>/10</span>
            <span>POTENTIAL: <span id="potential" style="color:#4caf50">0.00</span></span>
        </div>
        
        <div class="controls-row">
            <div class="balance-box"><span id="balDisplay">0.00</span> ETB</div>
            <div class="bet-selector">
                <button class="step-btn" onclick="changeBet(-2)">-</button>
                <div style="min-width: 60px; text-align: center;">BET: <span id="betAmt">2</span></div>
                <button class="step-btn" onclick="changeBet(2)">+</button>
            </div>
        </div>

        <button class="play-btn" id="playBtn" onclick="playKeno()">PLAY NOW</button>
    </div>

    <script>
        let user = JSON.parse(localStorage.getItem('simba_active_user')) || { balance: 1694.50 };
        let balance = parseFloat(user.balance);
        let bet = 2;
        let selectedNumbers = [];

        function initGrid() {
            const grid = document.getElementById('grid');
            for (let i = 1; i <= 80; i++) {
                const cell = document.createElement('div');
                cell.className = 'num-cell';
                cell.innerText = i;
                cell.onclick = () => toggleNumber(i, cell);
                grid.appendChild(cell);
            }
            updateUI();
        }

        function toggleNumber(num, element) {
            if (selectedNumbers.includes(num)) {
                selectedNumbers = selectedNumbers.filter(n => n !== num);
                element.classList.remove('selected');
            } else if (selectedNumbers.length < 10) {
                selectedNumbers.push(num);
                element.classList.add('selected');
            }
            document.getElementById('pickCount').innerText = selectedNumbers.length;
            document.getElementById('potential').innerText = (bet * (selectedNumbers.length * 2.5)).toFixed(2);
        }

        function changeBet(v) {
            bet = Math.max(2, bet + v);
            document.getElementById('betAmt').innerText = bet;
            document.getElementById('potential').innerText = (bet * (selectedNumbers.length * 2.5)).toFixed(2);
        }

        function updateUI() {
            document.getElementById('balDisplay').innerText = balance.toFixed(2);
            user.balance = balance.toFixed(2);
            localStorage.setItem('simba_active_user', JSON.stringify(user));
        }

        function toggleMute() {
            const s = document.getElementById('speaker');
            s.innerText = s.innerText === 'ðŸ”Š' ? 'ðŸ”‡' : 'ðŸ”Š';
        }

        function playKeno() {
            if (selectedNumbers.length === 0) return alert("Select numbers first!");
            if (balance < bet) return alert("Low balance!");

            balance -= bet;
            updateUI();
            
            // Draw logic (Simplified)
            alert("Waiting for draw...");
        }

        initGrid();
    </script>
</body>
</html>
