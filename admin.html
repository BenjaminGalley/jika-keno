<!DOCTYPE html>
<html>
<head>
    <title>Simba Admin Panel</title>
    <style>
        body { background: #0b0e14; color: white; font-family: sans-serif; }
        .box { max-width: 900px; margin: 20px auto; background: #1c2128; padding: 20px; border-radius: 10px; }
        h2 { color: #fcc201; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border: 1px solid #333; text-align: left; }
        th { background: #2d333b; color: #fcc201; }
        .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .btn-dep { background: #2ea44f; color: white; }
        .btn-wit { background: #fcc201; color: black; }
    </style>
</head>
<body>
    <div class="box">
        <h2>SIMBA ADMIN CONTROL</h2>
        <button class="btn" style="background:#444; color:white;" onclick="loadData()">ðŸ”„ Refresh Requests</button>
        <table id="adminTable">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Player Phone</th>
                    <th>Amount</th>
                    <th>Details (From/Ref/Bank)</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tbody"></tbody>
        </table>
    </div>

    <script>
        const URL = "YOUR_DEPLOYED_SCRIPT_URL";

        async function loadData() {
            const res = await fetch(URL + "?action=adminGet");
            const data = await res.json();
            const tbody = document.getElementById('tbody');
            tbody.innerHTML = "";

            data.forEach(item => {
                const isDeposit = item.type === "PENDING_DEPOSIT";
                tbody.innerHTML += `<tr>
                    <td style="color:${isDeposit?'#2ea44f':'#fcc201'}">${isDeposit?'DEPOSIT':'WITHDRAW'}</td>
                    <td>${item.phone}</td>
                    <td>${item.amount} ETB</td>
                    <td>${item.details}</td>
                    <td>
                        <button class="btn ${isDeposit?'btn-dep':'btn-wit'}" onclick="approve('${item.row}','${item.type}','${item.phone}','${item.amount}')">
                            ${isDeposit ? 'APPROVE & ADD MONEY' : 'MARK AS PAID OUT'}
                        </button>
                    </td>
                </tr>`;
            });
        }

        async function approve(row, type, phone, amount) {
            if(!confirm("Confirm processing this transaction?")) return;
            await fetch(`${URL}?action=adminApprove&row=${row}&type=${type}&phone=${phone}&amount=${amount}`);
            alert("Updated successfully!");
            loadData();
        }
        window.onload = loadData;
    </script>
</body>
</html>
